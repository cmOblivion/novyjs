!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Novy={})}(this,(function(e){"use strict";function t(){let e=0;return()=>e++}let n=(e,t)=>{return(null==(n=e)?String(n):n.constructor.name)===t;var n};class l{#e=t();constructor(){this.#e=t(),this.$events={}}$heard(e){return Reflect.has(this.$events,e)}$on(e,t){Reflect.has(t,"#uuid")&&(t.$uuid=this.#e());let n=e.split("."),l=this.$events;for(let e of n)Reflect.has(l,e)||(l[e]={$cb:[]}),l=l[e];return l.$cb.push(t),this}$$runCallback(e,...t){for(let n in e)if("$cb"===n)for(let n of e.$cb)n(...t);else this.$$runCallback(e[n])}$emit(e,...t){var n=e.split(".");let l=this.$events;for(let e of n)l[e]&&(l=l[e]);return this.$$runCallback(l,...t),this}$off(e,t){var l=e.split(".");let s=this.$events;for(let e of l)s[e]&&(s=s[e]);if(n(t,"Function")){if(Reflect.has(s,"$cb"))for(let e in s.$cb)s.$cb[e].$uuid===t.uuid&&delete s.$cb[e]}else s.$cb=[];return this}}class s extends l{constructor(){super(),this.$lockFunc=null}lock(e){this.$lockFunc=e}unlock(e){this.$lockFunc=null}}e.NovyEvent=l,e.NovyVM=function(...e){var t=new s;return Object.assign(t,...e),new Proxy(t,{get:(e,t,n)=>(Reflect.get(e,"$lockFunc")&&e.$on(`change.${t}`,Reflect.get(e,"$lockFunc")),Reflect.get(e,t,n)),set(e){}})},Object.defineProperty(e,"__esModule",{value:!0})}));
